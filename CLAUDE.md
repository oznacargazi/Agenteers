# CLAUDE.md - Agenteers Project Configuration

This file configures Claude Code to work with the Agenteers specialized .NET agent system.

## Project Overview

Agenteers is a comprehensive multi-agent orchestration system specialized for .NET 8, ASP.NET Core, and Blazor development. The system leverages Clean Architecture principles and Microsoft best practices through coordinated specialist agents.

## Technology Stack

- **Backend**: .NET 8, ASP.NET Core, Clean Architecture
- **Frontend**: Blazor Server & WebAssembly
- **Database**: Entity Framework Core, SQL Server/PostgreSQL
- **Authentication**: ASP.NET Core Identity, JWT
- **Patterns**: Domain-Driven Design, CQRS, Repository Pattern

## Agent Routing Protocol

### CRITICAL: Orchestration Rules

1. **Multi-step tasks** MUST start with `@agent-dotnet-orchestrator`
2. **Single-domain tasks** can use specialized agents directly
3. **Agents cannot invoke each other** - main Claude coordinates
4. **Structured returns** enable inter-agent communication

### Task-to-Agent Mapping

| Task Category | Primary Agent | Fallback Agent |
|--------------|--------------|----------------|
| **Architecture Design** | dotnet-backend-architect | - |
| **Database Modeling** | ef-core-entity-modeler | dotnet-backend-architect |
| **API Development** | aspnet-core-api-developer | dotnet-backend-architect |
| **Blazor UI** | blazor-component-architect | razor-page-builder |
| **Authentication** | identity-auth-specialist | aspnet-core-api-developer |
| **Orchestration** | dotnet-orchestrator | - |
| **Code Review** | code-reviewer | - |
| **Testing** | test-specialist | - |

## Task JSON Format

All agents accept standardized JSON task payloads:

```json
{
  "task": "string - task type",
  "goal": "string - specific objective",
  "context": {
    "project_type": "blazor_server | blazor_wasm | web_api",
    "existing_structure": "description",
    "constraints": ["array of constraints"]
  },
  "requirements": {
    "functional": ["array of features"],
    "non_functional": ["performance", "security", "scalability"]
  },
  "input_files": ["array of relevant file paths"],
  "output_format": "code | documentation | configuration"
}
```

## Agent Communication Protocol

### Input Structure
```json
{
  "from_agent": "previous_agent_name",
  "phase": "current_phase",
  "previous_output": {
    "artifacts": ["created files/classes"],
    "decisions": ["architectural choices"],
    "constraints": ["identified limitations"]
  },
  "next_task": "specific work needed"
}
```

### Output Structure
```json
{
  "agent": "current_agent_name",
  "phase_complete": "phase_name",
  "artifacts": {
    "files_created": ["list"],
    "files_modified": ["list"],
    "code_snippets": {}
  },
  "decisions": ["choices made"],
  "handoff": {
    "next_agent": "agent_name",
    "required_input": {},
    "dependencies": []
  }
}
```

## Development Workflow

### 1. Initialize Project
```bash
claude "use @agent-team-configurator to analyze my .NET project"
```

### 2. Architecture Design
```bash
claude "use @agent-dotnet-backend-architect to design [feature]"
```

### 3. Full Feature Development
```bash
claude "use @agent-dotnet-orchestrator to build [complete feature]"
```

### 4. Code Review
```bash
claude "use @agent-code-reviewer to review the implementation"
```

## Best Practices

### Clean Architecture Structure
```
src/
├── MyApp.Domain/           # Entities, Value Objects, Interfaces
├── MyApp.Application/      # Use Cases, DTOs, Application Services
├── MyApp.Infrastructure/   # EF Core, External Services
├── MyApp.WebApi/          # Controllers, Middleware
└── MyApp.BlazorUI/        # Components, Pages
```

### Naming Conventions
- **Entities**: PascalCase singular (User, Order)
- **Tables**: PascalCase plural (Users, Orders)
- **Interfaces**: I prefix (IUserService)
- **Async methods**: Async suffix (GetUserAsync)

### Code Standards
- Use dependency injection everywhere
- Implement repository pattern for data access
- Apply SOLID principles
- Write unit tests for business logic
- Use FluentValidation for complex validation
- Implement global error handling

## Performance Guidelines

### Token Optimization
- Agents return structured JSON, not full code files
- Use references to existing code when possible
- Batch related operations in single agent calls
- Reuse previous agent outputs

### Caching Strategy
- Cache agent outputs for similar tasks
- Store architectural decisions for consistency
- Maintain component library for reuse

## Security Considerations

- Always validate input at API boundaries
- Use parameterized queries (EF Core handles this)
- Implement authorization policies
- Sanitize user-generated content
- Use HTTPS everywhere
- Store secrets in configuration, not code

## AI Team Configuration (autogenerated by team-configurator, 2024-01-31)

**Important: YOU MUST USE subagents when available for the task.**

### Detected Stack
- .NET 8.0
- ASP.NET Core
- Blazor Server/WebAssembly
- Entity Framework Core
- SQL Server/PostgreSQL

### Agent Assignments

| Task | Agent | Notes |
|------|-------|-------|
| Architecture Design | dotnet-backend-architect | Clean Architecture, DDD |
| Database Schema | ef-core-entity-modeler | Code First, Migrations |
| API Development | aspnet-core-api-developer | REST, GraphQL |
| Blazor Components | blazor-component-architect | Server & WASM |
| Razor Pages | razor-page-builder | MVC Views |
| Authentication | identity-auth-specialist | Identity, JWT |
| Multi-step Features | dotnet-orchestrator | Coordinates all agents |
| Code Review | code-reviewer | Security, Performance |
| Testing | test-specialist | Unit, Integration |
| Documentation | documentation-specialist | API docs, README |

---

*Configuration updated automatically. Do not modify the AI Team Configuration section manually.*
